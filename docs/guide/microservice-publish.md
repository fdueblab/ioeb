# 原子微服务可视化解析发布

## 功能概述

通过智能代码解析和可视化交互，将AI算法代码自动封装为标准化的MCP Server微服务，实现从算法到服务的一键发布。

## 界面预览

![算法发布界面](https://ioeb-1317429791.cos.ap-shanghai.myqcloud.com/docs/images/3-算法发布界面-1.png)

*原子微服务发布主界面，支持代码上传和自动解析*

## 发布流程

### 1. 算法代码上传

::: tip 示例代码下载
**下载示例代码：** [gnn_risk_detection.zip](https://ioeb-1317429791.cos.ap-shanghai.myqcloud.com/docs/gnn_risk_detection.zip)

这个示例包含了一个基于图神经网络的风险检测算法，您可以直接使用这个代码来体验平台的算法封装功能。
:::

**支持的代码格式：**
- 单个 `.py` 文件
- `.zip` 格式的项目代码压缩包
- 必须符合平台的代码模板要求

![封装前的代码](https://ioeb-1317429791.cos.ap-shanghai.myqcloud.com/docs/images/3-0-封装前的代码.png)

**操作步骤：**
1. 点击"选择程序"按钮上传代码文件
2. 点击"开始上传"按钮提交代码
3. 等待系统进行静态检查和依赖分析

![算法发布界面-上传](https://ioeb-1317429791.cos.ap-shanghai.myqcloud.com/docs/images/3-算法发布界面-2.png)

### 2. 智能依赖分析

![算法发布界面-分析](https://ioeb-1317429791.cos.ap-shanghai.myqcloud.com/docs/images/3-算法发布界面-3.png)

系统自动完成：
- **代码结构解析**：识别函数、类、模块结构
- **依赖关系分析**：提取import和调用关系
- **接口识别**：自动识别可封装的功能接口
- **依赖图谱生成**：生成可视化的代码依赖关系图

### 3. 可视化接口选择

![可视化依赖图](https://ioeb-1317429791.cos.ap-shanghai.myqcloud.com/docs/images/3-算法发布界面-4.png)

**可视化功能：**

::: info 依赖图谱交互
- **功能节点**：图中每个节点代表一个可封装的功能模块
- **点击选择**：点击节点选择要封装为接口的功能
- **依赖展示**：清晰展示模块间的调用和依赖关系
- **智能推荐**：系统AI分析推荐最佳封装方案
:::

**选择封装接口：**
1. 在依赖图谱中点击要封装的功能节点
2. 系统自动选定相关依赖和调用链
3. 预览封装后的接口定义和参数

### 4. 自动代码封装

![自动封装结果](https://ioeb-1317429791.cos.ap-shanghai.myqcloud.com/docs/images/3-算法发布界面-5.png)

系统自动完成：
- **MCP Server包装**：生成标准化的微服务接口代码
- **依赖管理**：更新requirements.txt和环境配置
- **容器化配置**：生成Dockerfile和相关配置文件
- **接口标准化**：统一输入输出格式和错误处理

::: details MCP Server 技术详解
**什么是MCP（Model Context Protocol）？**

MCP是由Anthropic公司开发的开源协议，专门用于连接AI助手与各种工具和数据源。

**平台技术演进：**
- **早期阶段**：算法封装为传统的REST Server微服务
- **当前版本**：升级为MCP Server架构，更适合智能体应用

**MCP Server优势：**
- 更適合智能体间的交互通信
- 提供标准化的AI工具调用接口
- 支持上下文感知的服务调用
- 与大语言模型集成更自然
:::

### 5. 微服务预发布

![预发布配置](https://ioeb-1317429791.cos.ap-shanghai.myqcloud.com/docs/images/3-算法发布界面-6.png)

**配置服务信息：**
1. **服务名称**：设置微服务的标识名称
2. **服务描述**：详细描述服务功能和用途
3. **版本信息**：设置服务版本号

**预发布处理：**
- **代码封装**：生成微服务封装文件（app.py）
- **依赖更新**：更新项目依赖以支持微服务运行
- **容器化配置**：生成完整的Docker配置文件
- **自动下载**：封装好的代码压缩包自动下载
- **后台部署**：平台开始容器化部署过程

::: warning 预发布状态说明
**预发布 vs 正式发布：**

- **预发布状态**：服务已运行但未通过技术评测，暂时无法用于元应用构建
- **正式发布状态**：通过微服务技术评测后，可以被正式调用

**状态转换流程：**
1. **部署中**：平台分配容器进行部署
2. **预发布（未评测）**：部署完成，服务可访问
3. **预发布（待平台评测）**：发布者完成自评测
4. **已发布**：管理员完成评测，正式发布
:::

## 核心技术特性

### 智能代码解析

::: details 解析能力
- **静态分析**：AST语法树分析，识别代码结构
- **动态追踪**：执行路径分析，理解调用关系
- **类型推断**：自动推断函数参数和返回值类型
- **文档提取**：自动提取注释和文档字符串
:::

### 可视化依赖管理

::: details 可视化功能
- **交互式图谱**：支持缩放、拖拽、筛选操作
- **层次展示**：清晰的模块层次和依赖关系
- **冲突检测**：识别循环依赖和版本冲突
- **优化建议**：提供依赖简化和优化建议
:::

### MCP Server标准化

::: details 标准化特性
- **统一接口**：标准的工具调用接口规范
- **类型安全**：完整的输入输出类型定义
- **错误处理**：统一的异常和错误处理机制
- **文档生成**：自动生成API文档和使用示例
:::

## 代码要求与最佳实践

### 代码模板要求

::: warning 重要要求
**提交的代码必须符合平台的代码模板规范，详细要求请参考：**

**📖 [代码模板提交规范](./code-template.md)**

模板包含函数接口定义、参数注释、返回值格式等完整的开发规范。
:::

### 开发建议

::: tip 最佳实践
- **模块化设计**：将功能拆分为独立的函数模块
- **类型注解**：使用Python类型注解明确参数类型
- **文档完整**：提供详细的函数和模块文档
- **依赖管理**：使用requirements.txt管理外部依赖
- **测试用例**：提供单元测试和示例数据
:::

## 常见问题

**Q: 代码解析失败怎么办？**
A: 检查代码是否符合模板要求，确保语法正确且依赖完整。可以使用提供的示例代码作为参考。

**Q: 依赖图显示不完整？**
A: 确保所有import语句正确，检查是否有动态导入或条件导入未被识别。

**Q: 预发布后如何查看服务状态？**
A: 在垂域AI资源总览页面可以查看服务的部署状态和技术评测进度。

**Q: MCP Server与REST API有什么区别？**
A: MCP Server专为AI智能体设计，提供更标准化的工具调用接口，更适合构建智能体应用。 